pipeline {
	agent any

	stages {
    stage('Terraform Plan') {
      steps {
        script {
          withCredentials([usernamePassword(credentialsId: 'aws', usernameVariable: 'AWS_ACCESS_KEY_ID', passwordVariable: 'AWS_SECRET_ACCESS_KEY')]) {
            dir('module6/sample') {
              sh '''
                set +x
                echo hello $AWS_ACCESS_KEY_ID
                terraform init
                terraform plan
              '''
            }
          }
        }
      }
    }
	}
}
